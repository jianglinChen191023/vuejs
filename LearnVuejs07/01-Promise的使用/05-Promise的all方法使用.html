<!--
@author Orange
@date 2021-07-09
-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>05-Promise的all方法使用</title>
</head>
<body>

<script>
  // 1. 多个请求的处理

  // 1.1 普通处理
  // 请求一:
  let isResult1 = false;
  let isResult2 = false;
  $ajax({
    url: '',
    success: function(data){
      console.log(data);
      isResult1 = true;
      handleResult();
    }
  })
  // 请求二:
  $ajax({
    url: '',
    success: function(data){
      console.log(data);
      isResult2 = true;
      handleResult();
    }
  })

  function handleResult(){
    if(isResult1 && isResult2){
      //
    }
  }

  // 1.2 使用 Promise 处理
  Promise.all([
    // new Promise((resolve, reject) => {
    //   $.ajax({
    //     url: 'url1',
    //     success: function(data){
    //       resolve(data);
    //     }
    //   })
    // }),
    // new Promise((resolve, reject) => {
    //   $.ajax({
    //     url: 'url2',
    //     success: function(data){
    //       resolve(data);
    //     }
    //   })
    // })

    new Promise((resolve, reject) => {
      setTimeout(() => {
        resolve('result1');
      }, 2000)
    }),
    new Promise((resolve, reject) => {
      setTimeout(() => {
        resolve('result2');
      }, 1000)
    })
  ]).then(results => {
    console.log(results[0]);
    console.log(results[1]);
  })
</script>
</body>
</html>